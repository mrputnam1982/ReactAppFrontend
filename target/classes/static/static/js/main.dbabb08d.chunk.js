(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,n){},287:function(e,t,n){},358:function(e,t,n){},381:function(e,t,n){},408:function(e,t,n){},576:function(e,t){},578:function(e,t){},594:function(e,t,n){},596:function(e,t){},622:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(32),r=n.n(o),i=(n(381),n(45)),c=Object(i.b)(),l=n(3),d=n(8),u=n(5),h=n(13),m=n(2),j=["history"],p=function(e){var t=e.history,n=Object(u.a)(e,j),s=Object(a.useState)({action:t.action,location:t.location}),o=Object(d.a)(s,2),r=o[0],i=o[1];return Object(a.useLayoutEffect)((function(){return t.listen(i)}),[t]),Object(m.jsx)(h.c,Object(l.a)(Object(l.a)({},n),{},{location:r.location,navigationType:r.action,navigator:t}))},b=(n(100),n(12)),g=n.n(b),f=n(25),O=n(634),x=n(23),v=n.n(x),y=n(93),C=new O.a,S=new O.a,w={setName:function(e){C.next(e),localStorage.setItem("name",e)},currentName:C.asObservable(),get currentNameValue(){var e=localStorage.getItem("name");return e||C.value},setRole:function(e){S.next(e),localStorage.setItem("role",JSON.stringify(e))},currentRole:S.asObservable(),get currentRoleValue(){var e=localStorage.getItem("role");return e?JSON.parse(e):S.value}};var k=new O.a,P={setImage:function(e){k.next(e),localStorage.setItem("dataUrl",JSON.stringify(e))},currentImage:k.asObservable(),get currentImageValue(){var e=localStorage.getItem("dataUrl");return e?JSON.parse(e):k.value}};var I=new O.a(JSON.parse(localStorage.getItem("currentUser"))),V={login:function(e,t){return E.apply(this,arguments)},logout:U,getUsernameFromJWT:function(){if(localStorage.getItem("currentUser")){var e=JSON.parse(localStorage.getItem("currentUser")).token;return L(e).sub}return""},verifyLogin:function(){return N.apply(this,arguments)},resendVerificationEmail:function(e,t){return T.apply(this,arguments)},verificationError:!1,loggedIn:!!localStorage.getItem("currentUser"),currentUser:I.asObservable(),get currentUserValue(){return I.value}},L=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}};function N(){return(N=Object(f.a)(g.a.mark((function e(){var t,n,a,s,o,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new y.a,n=JSON.parse(localStorage.getItem("currentUser")),a=null,console.log("verifyLogin",n),!n){e.next=15;break}if(s=L(n.token),console.log("Decoded JWT",s),!(1e3*s.exp<Date.now())){e.next=15;break}return localStorage.removeItem("currentUser"),o=s.sub,r=t.get("refresh_token").key,i={username:o,cookieValue:r},console.log("JWT expired, create new JWT using refresh token",i),e.next=15,v.a.post("/auth/refresh_token/update",i,{headers:{"Content-Type":"application/json"}}).then((function(e){return localStorage.setItem("currentUser",JSON.stringify(e.data)),I.next(JSON.parse(localStorage.getItem("currentUser"))),console.log("jwt refreshed",e.data),e})).catch((function(e){U()}));case 15:return a="DONE",e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(f.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/auth/reverify",{username:t,password:n}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(f.a)(g.a.mark((function e(t,n){var a,s,o,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new y.a,s="",o="",r="",i="",e.next=7,v.a.put("/auth/login",{username:t,password:n}).then((function(e){console.log(e.data),localStorage.setItem("currentUser",JSON.stringify(e.data)),o=e.data.username,r=e.data.roles,i=e.data.avatar,V.loggedIn=!0,I.next(JSON.parse(localStorage.getItem("currentUser"))),console.log("loggedIn",V.loggedIn)})).catch((function(e){console.log(e.response.data),"Client not enabled"===e.response.data&&(V.verificationError=!0),V.loggedIn=!1}));case 7:if(!0!==V.loggedIn){e.next=10;break}return e.next=10,v.a.post("/auth/refresh_token/generate",t,{headers:{"Content-Type":"text/plain"}}).then((function(e){console.log(e.data),s=e.data}));case 10:return s&&(console.log("SetCookie refresh_token",s),a.set(s.name,{key:s.value},{path:"/",maxAge:s.maxAge,secure:s.secure}),console.log(a.getAll())),console.log("AuthenticationService Login",i),e.abrupt("return",{name:o,roles:r,image:i});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){var e=new y.a;localStorage.removeItem("currentUser"),e.remove("refresh_token",{path:"/"}),V.loggedIn=!1,w.setName(""),w.setRole(""),P.setImage(""),I.next(null),localStorage.removeItem("role"),localStorage.removeItem("name"),localStorage.removeItem("dataUrl")}var D=n(14),R=n(15),A=n(17),F=n(16),W=n(11),z=n(637),J=n(365),_=n(642),B=n(632),H=n(633),M=n(360),G=n(636),Y=n(27),K=n(638),q=n(19),Z=n(641),Q=n(635),X=n(631),$=n(362),ee=n(60),te=n(70),ne=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).resetUser=function(){a.setState({email:"",password:""})},a.userChange=function(e){a.setState(Object(q.a)({},e.target.name,e.target.value))},a.onKeyDown=function(e){"Enter"===e.key&&a.handleSubmit()},a.state={email:"",password:"",show:!1,loginFail:!1,verificationError:!1},a.handleSubmit=a.handleSubmit.bind(Object(W.a)(a)),a.resendVerificationEmail=a.resendVerificationEmail.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"resendVerificationEmail",value:function(){var e=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.resendVerificationEmail(this.state.email,this.state.password);case 2:e.sent,this.setState({verificationError:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,V.login(this.state.email,this.state.password);case 3:n=e.sent,console.log("Loginform",V.loggedIn),console.log(n),V.loggedIn?(w.setName(n.name),w.setRole(n.roles[0]),n.image&&P.setImage(n.image.strBase64File),this.setState({loginFail:!1}),c.push("/posts")):V.verificationError?this.setState({verificationError:!0}):this.setState({password:"",loginFail:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return this.props.username&&(t=this.props.username),Object(m.jsx)("div",{children:Object(m.jsx)(Z.a,{className:"border border-dark bg-dark text-white",children:Object(m.jsxs)(Q.a,{onReset:this.resetUser,id:"userFormId",children:[Object(m.jsx)(Z.a.Header,{}),Object(m.jsxs)(Z.a.Body,{children:[Object(m.jsxs)(Q.a.Group,{as:M.a,controlId:"formGridemail",children:[Object(m.jsx)(Q.a.Label,{children:"Email"}),Object(m.jsx)(Q.a.Control,{required:!0,autoComplete:"off",type:"email",name:"email",value:t,onChange:this.userChange,onKeyDown:this.onKeyDown,className:"bg-light",placeholder:"Enter Email"})]}),Object(m.jsxs)(Q.a.Group,{as:M.a,controlId:"formGridpassword",children:[Object(m.jsx)(Q.a.Label,{children:"Password"}),Object(m.jsx)(Q.a.Control,{required:!0,autoComplete:"off",type:"password",name:"password",value:n,onChange:this.userChange,onKeyDown:this.onKeyDown,className:"bg-light",placeholder:"Enter Password"})]}),Object(m.jsxs)(Z.a.Footer,{style:{textAlign:"right"},children:[this.state.loginFail?Object(m.jsx)(X.a,{children:" Invalid Credentials "},"danger"):Object(m.jsx)("div",{}),this.state.verificationError?Object(m.jsx)("div",{children:Object(m.jsxs)(X.a,{children:["Verification Failed, send new confirmation link?",Object(m.jsx)($.a,{size:"sm",variant:"secondary",onClick:this.resendVerificationEmail,children:"Resend Email"})]},"info")}):Object(m.jsx)("div",{}),Object(m.jsxs)($.a,{size:"sm",variant:"primary",onClick:this.handleSubmit,children:[Object(m.jsx)(ee.a,{icon:te.e}),"Submit"]})," "]})]})]})})})}}]),n}(a.Component),ae=(a.Component,n(363)),se=n.n(ae),oe=n(266),re=n(158),ie=n(364),ce=n.n(ie),le=(n(408),s.a.Component,function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).setEditorRef=function(e){return a.editor=e},a.handleScale=function(e){var t=parseFloat(e.target.value);a.setState({scale:t})},a.onCrop=function(){},a.state={image:"",showModal:!1,showImagePickerModal:!0,allowZoomOut:!1,scale:1},a.showImagePicker=a.showImagePicker.bind(Object(W.a)(a)),a.closeImagePicker=a.closeImagePicker.bind(Object(W.a)(a)),a.saveImage=a.saveImage.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"showImagePicker",value:function(){this.setState({showImagePickerModal:!0})}},{key:"closeImagePicker",value:function(e){this.setState({showImagePickerModal:!1}),e&&this.props.setImage(this.state.image)}},{key:"saveImage",value:function(){var e=this.editor.getImageScaledToCanvas().toDataURL();this.props.imageSaved(e),this.props.modalClose()}},{key:"render",value:function(){var e,t=this,n=this.props.image,a=this.props.showModal,s=this.props.modalClose;this.props.setImage;return e=n?125:0,Object(m.jsx)("div",{children:Object(m.jsx)(B.a,{children:Object(m.jsx)(H.a,{className:"justify-content-md-center",children:Object(m.jsx)(M.a,{md:"auto",children:Object(m.jsx)(K.a,{style:{marginLeft:"150px",maxWidth:"300px"},show:a,onHide:s,centered:!0,children:Object(m.jsxs)(B.a,{className:"justify-content-md-center gradientContainer",children:[n?Object(m.jsxs)("div",{children:[Object(m.jsx)(H.a,{style:{marginTop:"10px"},className:"justify-content-md-center",children:Object(m.jsx)(M.a,{md:"auto",children:Object(m.jsx)(se.a,{ref:this.setEditorRef,image:n,width:250,height:250,border:2,scale:this.state.scale,borderRadius:e})})}),Object(m.jsxs)(H.a,{children:[Object(m.jsx)("br",{}),Object(m.jsxs)("h1",{style:{color:"white"},children:[Object(m.jsx)("b",{children:"Zoom"}),":"]}),Object(m.jsx)("input",{name:"scale",type:"range",onChange:this.handleScale,min:this.state.allowZoomOut?"0.1":"1",max:"2",step:"0.01",defaultValue:"1"})]})]}):Object(m.jsx)("div",{}),Object(m.jsx)(H.a,{className:"justify-content-md-center",children:Object(m.jsx)(M.a,{md:"auto",children:Object(m.jsx)(oe.ImagePicker,{extensions:["jpg","jpeg","png"],dims:{minWidth:100,maxWidth:500,minHeight:100,maxHeight:500},onChange:function(e){console.log("Image chosen:",e),t.state.image=e,t.closeImagePicker(!0)},onError:function(e){console.log("Image error:",e),t.state.image="",t.closeImagePicker(!1)},children:Object(m.jsx)($.a,{color:"secondary",children:"Choose Image"})})})}),Object(m.jsx)(H.a,{className:"justify-content-md-center",style:{marginTop:"10px",marginBottom:"5px"},children:Object(m.jsx)(M.a,{md:"auto",children:n?Object(m.jsx)($.a,{class:"secondary",onClick:this.saveImage,children:"Save Image"}):Object(m.jsx)("div",{})})}),Object(m.jsx)(H.a,{})]})})})})})})}}]),n}(a.Component)),de=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;Object(D.a)(this,n),(a=t.call(this,e)).initialState={fullname:"",email:"",password:"",password_confirmation:"",registrationSuccess:!1,redirect:!1,goToRegistration:!1,errors:{}},a.resetUser=function(){a.setState((function(){return a.initialState}))},a.resetErrors=function(){a.setState({errors:{}})},a.createNewUser=function(e){v.a.post("/auth/register",e).then((function(e){a.setState({goToRegistration:!0})})).catch((function(e){if(console.log("Top level error",e.response),e.response.data.confirmPassword){var t=a.state.errors;t.confirmPassword=e.response.data.confirmPassword,a.setState({errors:t})}else if(e.response.data.password){var n=a.state.errors;n.password=e.response.data.password,a.setState({errors:n})}else console.log("Caught error",e.response.data.message),e.response.data.message===a.state.email+" already exists!"&&(console.log("redirect to login"),a.setState({redirect:!0}))}))},a.handleChange=function(e){a.setState(Object(q.a)({},e.target.name,e.target.value))},a.userChange=function(e){a.setState(Object(q.a)({},e.target.name,e.target.value))},a.state=a.initialState,a.show=!1,a.message="";e.onClose;return a.handleSubmit=a.handleSubmit.bind(Object(W.a)(a)),a.handleChange=a.handleChange.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"handleSubmit",value:function(e){var t=this.state.image;if(e.preventDefault(),console.log(t),""!==t)try{var n={id:null,name:this.state.fullname,username:this.state.email,password:this.state.password,confirmPassword:this.state.password_confirmation};this.resetErrors(),this.createNewUser(n)}catch(a){console.log(a)}}},{key:"redirectToLogin",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.fullname,n=e.email,a=e.password,s=e.password_confirmation,o=(e.registrationSuccess,e.redirect),r=e.goToRegistration,i=e.errors;return r?(this.state.goToRegistration=!1,Object(m.jsx)(h.a,{to:"/registration",state:{email:n}})):o?(this.state.redirect=!1,Object(m.jsx)(h.a,{to:"/",state:{email:n,displayLogin:!0,show:!0}})):Object(m.jsx)("div",{children:Object(m.jsx)(Z.a,{className:"border border-dark bg-dark text-white",children:Object(m.jsx)(Q.a,{onReset:this.resetUser,onSubmit:this.handleSubmit,id:"userFormId",children:Object(m.jsxs)(Z.a.Body,{children:[Object(m.jsxs)(Q.a.Group,{as:M.a,controlId:"formGridName",children:[Object(m.jsx)(Q.a.Label,{children:"Name"}),Object(m.jsx)(Q.a.Control,{required:!0,autoComplete:"off",type:"text",name:"fullname",value:t,onChange:this.userChange,className:"bg-light",isInvalid:!!i.fullname,placeholder:"Enter Full Name"}),Object(m.jsx)(Q.a.Control.Feedback,{type:"invalid",children:i.fullname})]}),Object(m.jsxs)(Q.a.Group,{as:M.a,controlId:"formGridemail",children:[Object(m.jsx)(Q.a.Label,{children:"Email"}),Object(m.jsx)(Q.a.Control,{required:!0,autoComplete:"off",type:"email",name:"email",value:n,onChange:this.userChange,isInvalid:!!i.username,className:"bg-light",placeholder:"Enter Email (Username)"}),Object(m.jsx)(Q.a.Control.Feedback,{type:"invalid",children:i.username})]}),Object(m.jsxs)(Q.a.Group,{as:M.a,controlId:"formGridpassword",children:[Object(m.jsx)(Q.a.Label,{children:"Password"}),Object(m.jsx)(Q.a.Control,{required:!0,autoComplete:"off",type:"password",name:"password",value:a,onChange:this.userChange,isInvalid:!!i.password,className:"bg-light",placeholder:"Enter Password"}),Object(m.jsx)(Q.a.Control.Feedback,{type:"invalid",children:i.password})]}),Object(m.jsxs)(Q.a.Group,{as:M.a,controlId:"formGridpassword",children:[Object(m.jsx)(Q.a.Label,{children:"Password"}),Object(m.jsx)(Q.a.Control,{required:!0,autoComplete:"off",type:"password",name:"password_confirmation",value:s,onChange:this.userChange,isInvalid:!!i.confirmPassword,className:"bg-light",placeholder:"Re-enter Password"}),Object(m.jsx)(Q.a.Control.Feedback,{type:"invalid",children:i.confirmPassword})]}),Object(m.jsx)(Z.a.Footer,{style:{textAlign:"center"},children:Object(m.jsx)(B.a,{class:"fluid",children:Object(m.jsx)("div",{class:"row",children:Object(m.jsxs)("div",{class:"btn-group-sm btn-group-horizontal",children:[Object(m.jsxs)($.a,{size:"sm",variant:"primary",class:"customWidth",type:"submit",children:[Object(m.jsx)(ee.a,{icon:te.e}),"Submit"]})," ",Object(m.jsxs)($.a,{size:"sm",variant:"primary",class:"customWidth",type:"reset",children:[Object(m.jsx)(ee.a,{icon:te.f}),"Reset"]})]})})})})]})})})})}}]),n}(a.Component),ue=n(274),he=(n(287),function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).isLoggedIn=!1,a.displayLogin=!0,a.handleClose=a.handleClose.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"handleClose",value:function(){this.setState({})}},{key:"componentDidMount",value:function(){var e=this;V.currentUser.subscribe((function(t){t&&null!==t.getCurrentUserValue&&(e.isLoggedIn=!0)}))}},{key:"render",value:function(){var e=this.props,t=e.username,n=e.show,a=e.displayLogin,s=e.onHide;this.state;return Object(m.jsxs)(K.a,{show:n,onHide:s,children:[Object(m.jsx)(K.a.Header,{closeButton:!0,children:Object(m.jsx)(K.a.Title,{children:a?Object(m.jsxs)("div",{children:[" ",Object(m.jsx)(ue.b,{})," SignIn "]}):Object(m.jsxs)("div",{children:[" ",Object(m.jsx)(ue.a,{})," Register "]})})}),Object(m.jsx)(K.a.Body,{children:a?Object(m.jsx)(ne,{username:t}):Object(m.jsx)(de,{})})]})}}]),n}(a.Component)),me=n(72),je=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={isOpen:!1,displayLogin:!0,displayDropdown:!1,name:"",avatar:"",redirectToLogin:!1,redirectToPosts:!1,redirectToProfile:!1},a.toggle=a.toggle.bind(Object(W.a)(a)),a.loginLinkName="Login",a.isDlgOpen=!1,a.logout=a.logout.bind(Object(W.a)(a)),a.onClickPostRedirect=a.onClickPostRedirect.bind(Object(W.a)(a)),a.onClickProfileRedirect=a.onClickProfileRedirect.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.subscriptionLogOut=V.currentUser.subscribe((function(t){console.log("Logout?",t),null===t&&e.setState({name:"",displayDropdown:!1})})),this.subscriptionProfileDropdown=w.currentName.subscribe((function(t){console.log("checking profile dropdown name",t),"undefined"!==t&&t||(t=w.currentNameValue),t&&(console.log("currentName Observable Triggered",t),e.setState({name:t,displayDropdown:!0}))})),this.subscriptionImageSet=P.currentImage.subscribe((function(t){!0===V.loggedIn&&("undefined"!==t&&t||(t=P.currentImageValue),e.setState({avatar:t}))}))}},{key:"componentWillUnmount",value:function(){this.subscriptionProfileDropdown.unsubscribe(),this.subscriptionImageSet.unsubscribe(),this.subscriptionLogOut.unsubscribe()}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"logout",value:function(){V.logout(),this.setState({redirectToLogin:!0})}},{key:"onClickPostRedirect",value:function(){this.setState({redirectToPosts:!0})}},{key:"onClickProfileRedirect",value:function(){this.setState({redirectToProfile:!0})}},{key:"render",value:function(){var e=this.state.name,t=this.state.avatar;return this.state.redirectToLogin&&(this.state.redirectToLogin=!1,c.push("/")),this.state.redirectToPosts&&(this.state.redirectToPosts=!1,c.push("/posts")),this.state.redirectToProfile&&(this.state.redirectToProfile=!1,c.push("/profile")),Object(m.jsxs)(z.a,{color:"light",expand:"md",class:"px-2",children:[Object(m.jsx)(J.a,{style:{fontSize:"50px",fontFamily:"Arial"},children:Object(m.jsx)(Y.a,{to:"/",style:{textDecoration:"none"},children:"ReactBlog"})}),e?Object(m.jsx)(_.a,{className:"ms-auto",style:{marginRight:"20px"},children:Object(m.jsx)(B.a,{children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(M.a,{style:{marginRight:"10px"},children:t?Object(m.jsx)(me.a,{round:!0,size:"40",name:e,src:t}):e?Object(m.jsx)(me.a,{size:"40",round:!0,name:e}):Object(m.jsx)("div",{})}),Object(m.jsx)(M.a,{children:this.state.displayDropdown?Object(m.jsxs)(G.a,{class:"px-20",children:[Object(m.jsxs)(G.a.Toggle,{variant:"success",children:[" Welcome, ",e," "]}),Object(m.jsxs)(G.a.Menu,{children:[Object(m.jsx)(G.a.Item,{onClick:this.onClickPostRedirect,children:"View Posts"}),Object(m.jsx)(G.a.Item,{onClick:this.onClickProfileRedirect,children:"View/Edit Profile"}),Object(m.jsx)(G.a.Item,{children:"Contact Us"}),Object(m.jsx)(G.a.Item,{onClick:this.logout,children:"Logout"})]})]}):Object(m.jsx)("div",{})})]})})}):Object(m.jsx)("div",{})]})}}]),n}(a.Component),pe=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).update=function(){console.log("Login Button position within window",r.a.findDOMNode(a.refs.button).getBoundingClientRect()),a.setState({height:window.innerHeight,width:window.innerWidth})},a.onCloseDlg=function(){a.props.resetHomePageProps(),a.setState({show:!1,redirectLogicActive:!0})},a.state={show:!1,displayLogin:!1,height:0,width:0,redirectLogicActive:!0},a.openLoginDlg=a.openLoginDlg.bind(Object(W.a)(a)),a.openRegisterDlg=a.openRegisterDlg.bind(Object(W.a)(a)),a.onCloseDlg=a.onCloseDlg.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"openLoginDlg",value:function(){this.setState({show:!0,displayLogin:!0})}},{key:"openRegisterDlg",value:function(){this.setState({show:!0,displayLogin:!1})}},{key:"render",value:function(){var e=this.state,t=e.show,n=e.displayLogin,a=(e.height,e.width,e.redirectLogicActive);console.log("Properties",this.props,a);var s=null;return a&&this.props.show&&(console.log("redirecting to login"),s=this.props.email,t=this.props.show,n=this.props.displayLogin,this.state.redirectLogicActive=!1),console.log("Landing Component",s,t,n),Object(m.jsxs)("div",{ref:"root",children:[Object(m.jsx)(he,{username:s,show:t,displayLogin:n,onHide:this.onCloseDlg}),Object(m.jsx)(M.a,{style:{marginLeft:"auto",marginRight:"auto"},children:Object(m.jsxs)(B.a,{children:[Object(m.jsx)(H.a,{children:Object(m.jsx)(M.a,{children:Object(m.jsx)($.a,{ref:"button",className:"btn-primary",onClick:this.openLoginDlg,children:"Login"})})}),Object(m.jsx)(H.a,{children:Object(m.jsx)(M.a,{children:Object(m.jsx)($.a,{className:"link-style btn-secondary",style:{outline:"none"},onClick:this.openRegisterDlg,children:"Don't have an account? Register Here.."})})})]})})]})}}]),n}(a.Component),be=n(639),ge=n.p+"static/media/alpinelake_bg.d1f3d6dc.jpg",fe=n.p+"static/media/book_background.9e5f4bae.jpg",Oe=function(){var e=Object(h.f)(),t=Object(a.useState)(0),n=Object(d.a)(t,2),s=n[0],o=n[1],r=Object(a.useState)("/"),i=Object(d.a)(r,2),c=i[0],l=i[1],u=Object(a.useState)(0),j=Object(d.a)(u,2),p=(j[0],j[1]);console.log("location",e);Object(a.useCallback)((function(){e.state&&(e.state=null)}),[e]);function b(){console.log("Parent location state:",e.state),e.state&&(e.state="undefined",p((function(e){return e+1})))}return"/posts"===c?Object(m.jsx)(h.a,{to:"/posts"}):Object(m.jsx)("div",{children:Object(m.jsxs)(be.a,{activeIndex:s,onSelect:function(e,t){o(e)},children:[Object(m.jsx)(be.a.Item,{children:Object(m.jsx)("div",{className:"p5 mb-4 rounded-3",style:{backgroundImage:"url(".concat(ge,")"),backgroundSize:"cover"},children:Object(m.jsxs)(B.a,{style:{maxWidth:"100vw",maxHeight:"40vw",height:"40vw"},children:[Object(m.jsx)(H.a,{className:"text-center justify-content-center d-flex",children:Object(m.jsx)("h1",{className:"display-5",children:"Landing Page"})}),Object(m.jsx)(H.a,{className:"text-center justify-content-center d-flex",children:"undefined"!==e.state&&null!=e.state?Object(m.jsx)("div",{children:Object(m.jsx)(pe,{email:e.state.email,show:e.state.show,displayLogin:e.state.displayLogin,resetHomePageProps:b})}):Object(m.jsx)(pe,{email:null,show:!1,displayLogin:!1,resetHomePageProps:b})})]})})}),Object(m.jsx)(be.a.Item,{children:Object(m.jsx)("div",{className:"p5 mb-4 rounded-3",style:{backgroundImage:"url(".concat(fe,")"),backgroundSize:"cover"},children:Object(m.jsxs)(B.a,{style:{maxWidth:"100vw",maxHeight:"40vw",height:"40vw"},children:[Object(m.jsx)(H.a,{className:"text-center justify-content-center d-flex",children:Object(m.jsx)("h1",{className:"display-5",style:{color:"white"},children:"Explore our site!"})}),Object(m.jsx)(H.a,{children:Object(m.jsx)(B.a,{className:"justify-content-center",style:{maxWidth:"25vw"},children:Object(m.jsx)(M.a,{children:Object(m.jsx)(H.a,{children:Object(m.jsx)($.a,{type:"primary",size:"sm",onClick:function(){l("/posts")},children:"View Posts"})})})})})]})})})]})})},xe=n(10);function ve(){var e=V.currentUserValue;return console.log("authHeader",e.token),e&&e.token?"Bearer ".concat(e.token):{}}var ye=n(29),Ce=n(138),Se=n(136),we=n.n(Se),ke=n(137),Pe=n.n(ke),Ie=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={posts:[]},a.remove=a.remove.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"remove",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("/api/posts/".concat(t),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){n.props.updatePosts()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.isLoading,n=this.props.posts;console.log("Posts",n);var a=this.props.role;if(t)return Object(m.jsx)("p",{children:"Loading..."});var s=n.map((function(t){var n=Object(Ce.a)(Object(ye.convertFromRaw)(JSON.parse(t.body))),s=new Date(1e3*t.modifiedAt),o=s.toLocaleDateString("en-US",{month:"long"})+", "+Pe()(s).format("Do, YYYY, h:mm a");return Object(m.jsx)("div",{children:Object(m.jsxs)("article",{class:"blog-post",children:["ROLE_ADMIN"===a?Object(m.jsxs)(xe.b,{children:[Object(m.jsx)(Y.a,{style:{textColor:"white"},to:{pathname:"/posts/edit/".concat(t.id)},children:Object(m.jsx)(xe.a,{size:"sm",color:"primary",children:"Edit"})}),Object(m.jsx)(xe.a,{size:"sm",color:"danger",onClick:function(){return e.remove(t.id)},children:"Delete"})]}):Object(m.jsx)("div",{}),Object(m.jsx)("h2",{class:"blog-post-title",children:Object(m.jsx)(Y.a,{to:{pathname:"/posts/view/".concat(t.id)},children:t.title})}),Object(m.jsx)("p",{class:"blog-post-meta",children:t.author}),Object(m.jsx)("p",{class:"blog-post-meta",children:o}),Object(m.jsx)("p",{children:we()(n)})]})})}));return console.log(s),Object(m.jsx)("div",{children:s})}}]),n}(a.Component),Ve=Ie,Le={currentPage:1,itemsPerPage:3,itemCount:0,totalPages:1,getCurrentStartIndex:function(){return Le.itemsPerPage*(Le.currentPage-1)},getCurrentEndIndex:function(){return Le.itemsPerPage*Le.currentPage-1},goToNextPage:function(){Le.currentPage<Le.totalPages&&Le.currentPage++},goToPrevPage:function(){Le.currentPage>1&&Le.currentPage--},setItemCount:function(e){Le.itemCount=e},setTotalPages:function(){0===Le.itemCount?Le.totalPages=1:Le.totalPages=Math.ceil(Le.itemCount/Le.itemsPerPage)}};var Ne=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={role:"ROLE_GUEST",posts:[],currentPage:[],redirectToPostView:!1},a.subscriptionRole=null,a.goToNextPage=a.goToNextPage.bind(Object(W.a)(a)),a.goToPrevPage=a.goToPrevPage.bind(Object(W.a)(a)),a.updatePagination=a.updatePagination.bind(Object(W.a)(a)),a.redirect=a.redirect.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.subscriptionRole=w.currentRole.subscribe((function(t){t&&(console.log("Getting observable role",t),e.setState({role:t}))}))}},{key:"componentDidMount",value:function(){var e=this,t=V.verifyLogin();console.log("Posts componentDidMount",t),t&&t.then((function(t){localStorage.getItem("currentUser")&&(console.log("Posts componentDidMount re-render"),e.setState({role:w.currentRoleValue}))})),v.a.get("api/posts").then((function(t){console.log(t.data);var n=t.data;e.state.posts=n})).then((function(t){e.state.posts=e.state.posts.sort((function(e,t){return e.modifiedAt<t.modifiedAt?1:-1})),Le.setItemCount(e.state.posts.length),Le.setTotalPages(),console.log(Le.totalPages),e.setState({currentPage:e.getCurrentPage()})}))}},{key:"updatePagination",value:function(){var e=this,t=[];v.a.get("api/posts",{headers:{Authorization:ve()}}).then((function(e){console.log(e.data),t=e.data})).then((function(){Le.setItemCount(t.length),Le.setTotalPages(),Le.currentPage=1,e.setState({posts:t,currentPage:e.getCurrentPage()})}))}},{key:"componentWillUnmount",value:function(){this.subscriptionRole.unsubscribe()}},{key:"goToNextPage",value:function(){Le.goToNextPage(),this.setState({currentPage:this.getCurrentPage()})}},{key:"goToPrevPage",value:function(){Le.goToPrevPage(),this.setState({currentPage:this.getCurrentPage()})}},{key:"getCurrentPage",value:function(){return console.log("CurrentPage",Le.currentPage),this.state.posts.slice(Le.getCurrentStartIndex(),Le.getCurrentEndIndex()+1)}},{key:"isLastPage",value:function(){return Le.currentPage===Le.totalPages}},{key:"isFirstPage",value:function(){return 1===Le.currentPage}},{key:"redirect",value:function(){this.setState({redirectToPostView:!0})}},{key:"render",value:function(){var e=this.state.role.roleName,t=this.state.currentPage,n=this.isFirstPage(),a=this.isLastPage();console.log("CurrentPage",t);return Object(m.jsx)("div",{children:Object(m.jsxs)(xe.i,{fluid:!0,children:[Object(m.jsxs)(xe.n,{children:["ROLE_ADMIN"===e||"ROLE_USER"===e?Object(m.jsx)("div",{className:"float-right",children:Object(m.jsx)(Y.a,{to:{pathname:"/posts/edit/".concat("new")},children:Object(m.jsx)(xe.a,{color:"primary",children:"Add Post"})})}):Object(m.jsx)("div",{}),Object(m.jsx)("h3",{children:"Posts"}),Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsx)(Ve,{updatePosts:this.updatePagination,posts:t,role:e})})]}),1!==Le.totalPages?Object(m.jsxs)(xe.n,{children:[Object(m.jsx)(xe.h,{children:Object(m.jsx)(xe.a,{color:"primary",disabled:n,onClick:this.goToPrevPage,children:Object(m.jsx)(ee.a,{icon:te.c})})}),Object(m.jsx)(xe.h,{children:Object(m.jsx)(xe.a,{color:"primary",disabled:a,onClick:this.goToNextPage,children:Object(m.jsx)(ee.a,{icon:te.d})})})]}):Object(m.jsx)("div",{})]})})}}]),n}(a.Component),Te=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).setDomEditorRef=function(e){return a.domEditor=e},a.handleKeyCommand=a.handleKeyCommand.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"componentDidMount",value:function(){this.props.editorState&&this.props.onChange&&this.domEditor.focus()}},{key:"handleKeyCommand",value:function(e,t){var n=ye.RichUtils.handleKeyCommand(t,e);return n?(this.props.onChange(n),"handled"):"not-handled"}},{key:"render",value:function(){var e=this.props,t=e.editorState,n=e.onChange;return Object(m.jsx)("div",{style:{borderRadius:"5px",border:"1px solid lightgrey",minHeight:"6em",cursor:"text"},children:Object(m.jsx)(ye.Editor,{ref:this.setDomEditorRef,editorState:t,handleKeyCommand:this.handleKeyCommand,onChange:n})})}}]),n}(a.Component),Ee=(n(594),n(595),function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).onChangeRichTextEditor=function(e){a.setState({editorState:e})},a.setImage=function(e){a.setState({image:e})},a.imageSaved=function(e){a.setState({image:e,postImage:!0})},a.profile={username:"",name:"",heading:"",body:"",imageUrl:""},a.state={id:"",profile:a.profile,image:"",editorState:ye.EditorState.createEmpty(),showModal:!1,postImage:!1,updateEditor:!1,contentLoaded:!1},a.initialFormState={name:"",heading:"",body:"",imageUrl:""},a.username=V.getUsernameFromJWT(),a.submitDisabled=!0,a.handleChange=a.handleChange.bind(Object(W.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(W.a)(a)),a.displayAvatarEditor=a.displayAvatarEditor.bind(Object(W.a)(a)),a.closeAvatarEditor=a.closeAvatarEditor.bind(Object(W.a)(a)),a.imageSaved=a.imageSaved.bind(Object(W.a)(a)),a.postImagetoImgBB=a.postImageToImgBB.bind(Object(W.a)(a)),a.getBase64Image=a.getBase64Image.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"handleSubmit",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n,a=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(n=V.verifyLogin())&&(this.submitDisabled=!0,n.then((function(e){if(localStorage.getItem("currentUser")){var t=a.state,n=t.id,s=(t.profile,t.image,t.editorState,t.showModal,t.postImage),o=a.state.image;if(console.log("submitting profile info",a.state),o&&s){(i={id:n,name:a.profile.name,profileHeading:a.profile.heading,profileInfo:null,avatar:{username:a.profile.username,strBase64File:o}}).profileInfo=JSON.stringify(Object(ye.convertToRaw)(a.state.editorState.getCurrentContent()));var r=JSON.stringify(i);v.a.put("/api/clients/".concat(i.id),r,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){P.setImage(a.state.image),c.push("/posts")})).catch((function(e){return console.log(e)}))}else{var i;(i={id:n,name:a.profile.name,profileHeading:a.profile.heading,profileInfo:null,avatar:null}).profileInfo=JSON.stringify(Object(ye.convertToRaw)(a.state.editorState.getCurrentContent()));var l=JSON.stringify(i);v.a.put("/api/clients/".concat(i.id),l,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){c.push("/posts")})).catch((function(e){return console.log(e)}))}}})),this.setState({}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClient",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,v.a.get("/api/clients/getByUsername/".concat(this.username),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:ve()}}).then((function(e){t=e.data})).catch((function(e){console.log("ProfileEdit Error",e)}));case 3:this.initialFormState={name:t.name,heading:t.profileHeading,body:t.profileInfo},this.profile={username:t.username,name:t.name,heading:t.profileHeading,body:t.profileInfo},""===P.currentImageValue?t.avatar?this.profile.imageUrl=t.avatar.strBase64File:this.profile.imageUrl="":this.profile.imageUrl=P.currentImageValue,n=this.state.editorState,this.profile.body&&(n=ye.EditorState.createWithContent(Object(ye.convertFromRaw)(JSON.parse(this.profile.body)))),this.setState({id:t.id,profile:this.profile,editorState:n,image:this.profile.imageUrl,contentLoaded:!0});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){localStorage.getItem("currentUser")&&this.getClient()}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name,s=this.profile;s[a]=n,this.setState({profile:s})}},{key:"checkFormState",value:function(){var e="",t="",n="",a="",s="",o="";return this.state.profile.name&&(e=this.state.profile.name),this.state.profile.heading&&(t=this.state.profile.heading),this.state.profile.body&&(n=JSON.stringify(Object(ye.convertToRaw)(this.state.editorState.getCurrentContent()))),this.state.profile.imageUrl&&this.state.profile.imageUrl,this.initialFormState.name&&(a=this.initialFormState.name),this.initialFormState.heading&&(s=this.initialFormState.heading),this.initialFormState.body&&(o=this.initialFormState.body),this.initialFormState.imageUrl&&this.initialFormState.imageUrl,!this.state.postImage&&(e===a&&t===s&&n===o)}},{key:"displayAvatarEditor",value:function(){this.setState({showModal:!0})}},{key:"closeAvatarEditor",value:function(){this.setState({showModal:!1})}},{key:"postImageToImgBB",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n,a,s=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"cfb81278dab11ed393283f39d4119f59","https://api.imgbb.com/1/upload",n=t.replace(/^data:image\/(png|jpg|jpeg|gif);base64,/,""),(a=new FormData).append("image",n),e.next=7,v.a.post("https://api.imgbb.com/1/upload",a,{params:{key:"cfb81278dab11ed393283f39d4119f59"}}).then((function(e){var t=e.data.data.url,n=s.state.profile;n.imageUrl=t,s.setState({profile:n})})).catch((function(e){return console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBase64Image",value:function(){var e=Object(f.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/clients/getById/".concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:ve()}}).then((function(e){return e.data.iconUrl}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=(e.id,e.profile),n=e.image,a=(e.editorState,e.showModal),s=(e.postImage,e.contentLoaded);return console.log("ProfileEdit Render",this.state),this.submitDisabled=this.checkFormState(),Object(m.jsx)("div",{children:s?Object(m.jsxs)("div",{children:[Object(m.jsx)(le,{image:n,showModal:a,modalClose:this.closeAvatarEditor,setImage:this.setImage,imageSaved:this.imageSaved}),Object(m.jsxs)(xe.i,{children:[Object(m.jsx)("h1",{children:"Edit Profile"}),Object(m.jsxs)(xe.j,{onSubmit:this.handleSubmit,children:[Object(m.jsxs)(xe.k,{children:[Object(m.jsx)(xe.m,{for:"name",children:Object(m.jsx)("strong",{children:"Name"})}),Object(m.jsx)(xe.l,{style:{maxWidth:"250px"},type:"text",name:"name",id:"name",value:t.name,onChange:this.handleChange,autoComplete:"name"})]}),Object(m.jsxs)(xe.k,{children:[Object(m.jsx)(xe.m,{for:"heading",children:Object(m.jsx)("strong",{children:"Heading"})}),Object(m.jsx)(xe.l,{type:"text",name:"heading",id:"heading",value:t.heading,onChange:this.handleChange,autoComplete:"heading"})]}),Object(m.jsxs)(xe.k,{children:[Object(m.jsx)(xe.m,{for:"body",children:Object(m.jsx)("strong",{children:"Profile Info"})}),Object(m.jsx)(Te,{editorState:this.state.editorState,onChange:this.onChangeRichTextEditor})]}),Object(m.jsx)(xe.k,{children:Object(m.jsxs)(xe.i,{children:[Object(m.jsx)(xe.n,{children:Object(m.jsx)(xe.m,{for:"Icon",children:Object(m.jsx)("strong",{children:"Profile Icon"})})}),Object(m.jsx)(xe.n,{children:n?Object(m.jsx)(me.a,{round:!0,borderRadius:"50",size:"100",name:n,src:n}):Object(m.jsx)(me.a,{size:"100",round:!0,name:t.name})}),Object(m.jsx)(xe.n,{children:Object(m.jsx)(xe.a,{style:{marginTop:"10px",maxWidth:"200px"},color:"primary",onClick:this.displayAvatarEditor,children:"Choose Icon"})})]})}),Object(m.jsxs)(xe.k,{children:[Object(m.jsx)(xe.a,{disabled:this.submitDisabled,color:"primary",type:"submit",children:"Update Profile"})," ",Object(m.jsx)(xe.a,{color:"secondary",tag:Y.a,to:"/posts",children:"Cancel"})]})]})]})]}):Object(m.jsx)("div",{})})}}]),n}(a.Component)),Ue=Ee;function De(){return(De=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.verifyLogin();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re=function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=t[0],s=t[1],o=function(){return De.apply(this,arguments)}();return"DONE"===o?s(!1):o&&o.then((function(e){var t=e;console.log("Promise resolved?",t),localStorage.getItem("currentUser")&&s(!1)})),n?Object(m.jsx)("div",{}):Object(m.jsx)("div",{children:Object(m.jsx)(B.a,{style:{position:"relative",maxWidth:"100vw",maxHeight:"40vw",height:"40vw"},children:Object(m.jsx)(Ue,{})})})},Ae=function(){var e=Object(h.f)();console.log(e);var t=Object(a.useState)(!1),n=Object(d.a)(t,2),s=n[0],o=n[1];return s?Object(m.jsx)(h.a,{to:"/"}):Object(m.jsx)("div",{children:Object(m.jsxs)(xe.i,{children:[Object(m.jsx)("div",{class:"row",children:Object(m.jsxs)("div",{class:"col text-center",children:["Sign-up successful, please check email sent to ",Object(m.jsx)("b",{children:e.state.email})," to finish registration process.."]})}),Object(m.jsx)("div",{class:"row",children:Object(m.jsx)("div",{class:"col text-center",children:Object(m.jsx)(xe.a,{className:"btn-primary center",onClick:function(){o(!0)},children:" Proceed "})})})]})})};function Fe(e){return function(t){var n=Object(h.f)(),a=Object(h.g)(),s=Object(h.h)();return Object(m.jsx)(e,Object(l.a)(Object(l.a)({},t),{},{params:s,navigate:a,location:n}))}}var We=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).emptyItem={title:"",body:"",author:""},a.onChangeRichTextEditor=function(e){a.setState({editorState:e})},a.state={post_id:"",value:"",item:a.emptyItem,editorState:ye.EditorState.createEmpty(),redirectToPosts:!1},a.state.item.author=w.currentNameValue,a.handleChange=a.handleChange.bind(Object(W.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t,n,a=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Props",this.props),this.state.post_id=this.props.params.id,"DONE"!==(n=V.verifyLogin())){e.next=9;break}if("new"===this.state.post_id){e.next=7;break}return e.next=7,v.a.get("/api/posts/".concat(this.state.post_id),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){t=e.data,a.setState({item:t,editorState:ye.EditorState.createWithContent(ye.ContentState.createFromText(t.body))})}));case 7:e.next=10;break;case 9:n&&n.then((function(e){localStorage.getItem("currentUser")&&"new"!==a.state.post_id&&v.a.get("/api/posts/".concat(a.state.post_id),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){t=e.data;var n=ye.EditorState.createWithContent(Object(ye.convertFromRaw)(JSON.parse(t.body)));a.setState({item:t,editorState:n})}))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name,s=Object(l.a)({},this.state.item);s[a]=n,this.setState({item:s})}},{key:"handleSubmit",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n,a,s=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=this.state,a=n.item,n.editorState,a.body=JSON.stringify(Object(ye.convertToRaw)(this.state.editorState.getCurrentContent())),console.log(JSON.stringify(a)),!a.id){e.next=8;break}v.a.put("/api/posts/".concat(a.id),a,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){s.setState({redirectToPosts:!0})})).catch((function(e){return console.log(e.response)})),e.next=10;break;case 8:return e.next=10,v.a.post("/api/posts",a,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){s.setState({redirectToPosts:!0})})).catch((function(e){return console.log(e.response)}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(m.jsx)("h2",{children:this.state.item.id?"Edit Post":"New Post"});return this.state.redirectToPosts?(this.state.redirectToPosts=!1,Object(m.jsx)(h.a,{to:"/posts"})):Object(m.jsx)("div",{children:Object(m.jsxs)(xe.i,{children:[e,Object(m.jsxs)(xe.j,{onSubmit:this.handleSubmit,children:[Object(m.jsxs)(xe.k,{children:[Object(m.jsx)(xe.m,{for:"title",children:"Title"}),Object(m.jsx)(xe.l,{type:"text",name:"title",id:"title",value:this.state.item.title||"",onChange:this.handleChange,autoComplete:"title"})]}),Object(m.jsxs)(xe.k,{children:[Object(m.jsx)(xe.m,{for:"body",children:"Body"}),this.onChangeRichTextEditor?Object(m.jsx)(Te,{editorState:this.state.editorState,onChange:this.onChangeRichTextEditor}):Object(m.jsx)("div",{})]}),Object(m.jsxs)(xe.k,{children:[Object(m.jsx)(xe.a,{color:"primary",type:"submit",children:"Save"})," ",Object(m.jsx)(xe.a,{color:"secondary",tag:Y.a,to:"/posts",children:"Cancel"})]})]})]})})}}]),n}(a.Component),ze=Fe(We),Je=(n(358),n(4)),_e=n.n(Je),Be=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;Object(D.a)(this,n),(a=t.call(this,e)).onExpand=function(){a.state.isExpanded||(a.outerHeight=document.scrollHeight,a.setState({isExpanded:!0}))};return a.state={isExpanded:!1},a.onExpand=a.onExpand.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"render",value:function(){var e=this.props,t=e.commentValue,n=e.handleCommentValue,a=(e.enterCommentLine,e.submitCommentLine),s=e.onClose,o=e.isExpanded;this.state.isExpanded=o;return Object(m.jsxs)("form",{onSubmit:a,onChange:n,className:_e()("comment-box",{expanded:o,collapsed:!o,modified:t.length>0}),style:{minHeight:o?this.outerHeight:46},children:[Object(m.jsx)("div",{className:"header headerComment",children:Object(m.jsxs)("div",{className:"user",children:[Object(m.jsx)("img",{src:"avatar/path",alt:"User avatar"}),Object(m.jsx)("span",{children:"User Name"})]})}),Object(m.jsx)("div",{className:"header headerComment",children:" ... "}),Object(m.jsx)("label",{className:"label labelComment",htmlFor:"comment",children:"What are your thoughts?"}),Object(m.jsx)("textarea",{onClick:this.onExpand,onFocus:this.onExpand,onChange:n,className:"comment-field",placeholder:"What are your thoughts?",value:t,name:"comment",id:"comment"}),Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsx)("button",{type:"button",className:"cancel",onClick:s,children:"Cancel"}),Object(m.jsx)("button",{type:"submit",disabled:t.length<1,children:"Enter"})]})]})}}]),n}(a.Component),He=n(373),Me=n(643),Ge=n(640),Ye=n(359),Ke=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).renderTooltip=function(e){return Object(m.jsxs)(He.a,Object(l.a)(Object(l.a)({id:"avatar-tooltip"},e),{},{children:[Object(m.jsx)(He.a.Header,{children:e.popper.state?Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"Name:"})," ",e.popper.state.options.name,Object(m.jsx)("br",{}),e.popper.state.options.title?Object(m.jsx)("i",{children:e.popper.state.options.title}):Object(m.jsx)("div",{})]}):Object(m.jsx)("div",{})}),Object(m.jsx)(He.a.Body,{children:e.popper.state?Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"A little about me:"})," ",e.popper.state.options.body?Object(m.jsx)("div",{children:we()(Object(Ce.a)(Object(ye.convertFromRaw)(JSON.parse(e.popper.state.options.body))))}):Object(m.jsx)("div",{children:"N/a"})]}):Object(m.jsx)("div",{children:"Loading..."})})]}))},a.commentListSorted=null,a.state={isLoading:!0,commentCount:0,upVotes:0,downVotes:0,isUpVotingDisabled:!1,isDownVotingDisabled:!1},a.commentList=null,a}return Object(R.a)(n,[{key:"tallyVotes",value:function(e){var t=0,n=0;return e&&e.length>0&&e.forEach((function(e){"UP"===e.voteType?t++:"DOWN"===e.voteType&&n++})),console.log("Tallying votes",t,n),{upVoteCount:t,downVoteCount:n}}},{key:"refreshCommentList",value:function(){var e=this,t=this.props,n=t.role,a=t.comments,s=t.commentProfiles,o=t.incrementDownVote,r=t.incrementUpVote,i=t.upVoteDisabled,c=t.downVoteDisabled,l=t.icons,d=t.removeComment,u=(t.count,t.currentUsername),h=t.currentRole;console.log("CurrentRole",h),console.log("Comment list properties",this.props),console.log("Refreshing the comment component",a,l,n),this.commentListSorted=a.sort((function(e,t){return e.createdAt<t.createdAt?-1:1}));console.log("RefreshCommentList commentProfiles",s),this.commentList=this.commentListSorted.map((function(t){var a=new Date(1e3*t.createdAt),j=a.toLocaleDateString("en-US",{month:"long"})+", "+Pe()(a).format("Do, YYYY, h:mm a");console.log("current comment in list",t,l[t.posterUsername]);var p=e.tallyVotes(t.votes),b=p.upVoteCount,g=p.downVoteCount;return console.log("UpVotes",b),console.log("DownVotes",g),Object(m.jsx)("div",{children:Object(m.jsxs)(B.a,{children:[Object(m.jsx)(H.a,{children:Object(m.jsx)("div",{children:t.commentText?Object(m.jsxs)(Me.a.Item,{children:[l[t.posterUsername]?Object(m.jsx)("div",{children:s[t.posterUsername]?Object(m.jsx)("div",{children:Object(m.jsx)(Ge.a,{placement:"top",delay:{show:250,hide:400},overlay:e.renderTooltip,popperConfig:{name:s[t.posterUsername].name,title:s[t.posterUsername].profileHeading,body:s[t.posterUsername].profileInfo},children:Object(m.jsx)("div",{style:{width:"75px"},children:Object(m.jsx)(me.a,{size:"50",round:!0,name:t.posterName,src:l[t.posterUsername]})})})}):Object(m.jsx)("div",{style:{width:"75px"},children:Object(m.jsx)(me.a,{size:"50",round:!0,name:t.posterName,src:l[t.posterUsername]})})}):Object(m.jsx)("div",{children:s[t.posterUsername]?Object(m.jsx)("div",{children:Object(m.jsx)(Ge.a,{placement:"top",delay:{show:250,hide:400},overlay:e.renderTooltip,popperConfig:{name:s[t.posterUsername].name,title:s[t.posterUsername].profileHeading,body:s[t.posterUsername].profileInfo},children:Object(m.jsx)("div",{style:{width:"75px"},children:Object(m.jsx)(me.a,{size:"50",round:!0,name:t.posterName})})})}):Object(m.jsx)("div",{style:{width:"75px"},children:Object(m.jsx)(me.a,{size:"50",round:!0,name:t.posterName})})}),t.commentName,Object(m.jsx)("br",{}),j,Object(m.jsx)("br",{}),t.commentText]}):Object(m.jsx)("div",{})})}),Object(m.jsx)(H.a,{alignItems:"flex-end",children:Object(m.jsxs)(M.a,{children:[Object(m.jsx)($.a,{disabled:i[t.id]||"ROLE_GUEST"===h||u===t.posterUsername,size:"sm",color:"primary",className:"rounded-circle",onClick:function(){return r(t.id)},children:Object(m.jsx)(ee.a,{icon:te.b})}),Object(m.jsxs)(Ye.a,{children:[" ",0!==b?b:" "]}),Object(m.jsx)("span",{children:" "}),Object(m.jsx)($.a,{disabled:c[t.id]||"ROLE_GUEST"===h||u===t.posterUsername,size:"sm",color:"primary",className:"rounded-circle",onClick:function(){return o(t.id)},children:Object(m.jsx)(ee.a,{icon:te.a})}),Object(m.jsxs)(Ye.a,{children:[" ",0!==g?g:" "," "]})]})}),Object(m.jsx)(H.a,{children:Object(m.jsx)(M.a,{children:"ROLE_ADMIN"===n?Object(m.jsx)($.a,{size:"sm",color:"danger",onClick:function(){return d(t.id)},children:"Delete"}):Object(m.jsx)("div",{})})})]})})}))}},{key:"componentDidMount",value:function(){this.refreshCommentList(),this.setState({isLoading:!1,commentCount:this.commentList.length})}},{key:"render",value:function(){return this.refreshCommentList(),this.state.isLoading?Object(m.jsx)("div",{}):Object(m.jsx)(B.a,{children:Object(m.jsx)(Me.a,{children:this.commentList})})}}]),n}(a.Component),qe=1,Ze=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).emptyItem={title:"",date:"",body:""},a.handleCommentValue=function(e){a.setState({commentValue:e.target.value})},a.submitCommentLine=function(e){e.preventDefault(),a.setCommentLine()},a.enterCommentLine=function(e){13===e.charCode&&a.setCommentLine()},a.onCommentClose=function(){a.setState({commentValue:"",isExpanded:!1})},a.state={title:"",date:"",body:"",commentValue:"",comments:[],icons:{},currentCount:qe,votes:{},usersVoted:{},upVoteDisabled:{},downVoteDisabled:{},username:"",commentProfiles:{},isExpanded:!1,isLoading:!0},a.handleCommentValue=a.handleCommentValue.bind(Object(W.a)(a)),a.enterCommentLine=a.enterCommentLine.bind(Object(W.a)(a)),a.submitCommentLine=a.submitCommentLine.bind(Object(W.a)(a)),a.onCommentClose=a.onCommentClose.bind(Object(W.a)(a)),a.setCommentLine=a.setCommentLine.bind(Object(W.a)(a)),a.removeComment=a.removeComment.bind(Object(W.a)(a)),a.incrementUpVote=a.incrementUpVote.bind(Object(W.a)(a)),a.incrementDownVote=a.incrementDownVote.bind(Object(W.a)(a)),a.updateUserVoted=a.updateUserVoted.bind(Object(W.a)(a)),a}return Object(R.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentRole="ROLE_GUEST",this.post_id=this.props.params.id,console.log("post id",this.post_id),this.state.username=V.getUsernameFromJWT(),this.getPostAndComments(),e.next=7,this.getUserProfiles();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserProfiles",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t,n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ROLE_GUEST"===this.currentRole){e.next=4;break}return t={},e.next=4,v.a.get("/api/clients/getAll",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){e.data.forEach((function(e){console.log("Client",e),t[e.username]=e})),console.log("commentProfiles",t),n.setState({commentProfiles:t})})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPostAndComments",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t,n,a,s,o,r,i=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.currentRoleValue&&(this.currentRole=w.currentRoleValue.roleName),t={title:"",date:"",body:"",comments:{},icons:{},currentCount:0,votes:{},usersVoted:{},upVoteDisabled:{},downVoteDisabled:{}},e.next=4,v.a.get("/api/posts/".concat(this.post_id),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){t.title=e.data.title,t.date=e.data.modifiedAt,t.body=e.data.body,t.comments=e.data.comments,console.log(t.comments)})).catch((function(e){console.log(e)}));case 4:if(t.comments&&null===t.comments[0]&&t.comments.pop(),!t.comments||!t.comments[0]){e.next=17;break}return n=new Set,new Set,t.comments.map((function(e){t.currentCount++,t.votes[e.id]=e.votes,t.usersVoted[e.id]={},null!==e.usersVoted&&Object.keys(e.usersVoted).length>=0?t.usersVoted[e.id]=e.usersVoted[e.id]:t.usersVoted[e.id][e.posterUsername]=!1,n.add(e.posterUsername)})),t.comments.forEach((function(e){t.upVoteDisabled[e.id]=!1,t.downVoteDisabled[e.id]=!1,e.votes&&e.votes.forEach((function(n){n.username===i.state.username&&("UP"===n.voteType?t.upVoteDisabled[e.id]=!0:"DOWN"===n.voteType&&(t.downVoteDisabled[e.id]=!0))}))})),a=Array.from(n),s=0,console.log(a),e.next=15,a.forEach((function(e){v.a.get("/api/getImage/".concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(e.data){console.log("image received",e.data);var n=e.data.username;t.icons[n]=e.data.strBase64File}++s===a.length&&(qe=t.currentCount,i.setState({title:t.title,date:t.date,body:t.body,comments:t.comments,icons:t.icons,currentCount:t.currentCount,upVoteDisabled:t.upVoteDisabled,downVoteDisabled:t.downVoteDisabled,isLoading:!1}))}))}));case 15:e.next=24;break;case 17:o=P.currentImageValue,console.log(o),o?t.icons[o.username]=o.strBase64File:(r=V.currentUserValue,t.icons[r]=null),qe=t.currentCount,null,null,this.setState({title:t.title,date:t.date,body:t.body,comments:t.comments,icons:t.icons,votes:null,usersVoted:null,currentCount:t.currentCount,isLoading:!1});case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"incrementUpVote",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Attempting to increment vote for",this.state.username,t),n={id:null,postId:this.post_id,commentId:t,username:this.state.username,voteType:"UP"},this.state.comments=this.updateCommentsWithVote(n),e.next=5,this.setCommentWithVotes(t);case 5:this.state.upVoteDisabled[t]=!0,this.state.downVoteDisabled[t]=!1,this.setState({});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"incrementDownVote",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Attempting to decrement vote for",this.state.username,t),n={id:null,postId:this.post_id,commentId:t,username:this.state.username,voteType:"DOWN"},this.state.comments=this.updateCommentsWithVote(n),e.next=5,this.setCommentWithVotes(t);case 5:this.state.upVoteDisabled[t]=!1,this.state.downVoteDisabled[t]=!0,this.setState({});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCommentsWithVote",value:function(e){var t,n=this,a=[],s=!1;return this.state.comments.forEach((function(t){t.id===e.commentId&&(t.votes&&t.votes.forEach((function(t){t.username===n.state.username?(a.push(e),s=!0):a.push(t)})),s||a.push(e))})),console.log("Before updating votes",this.state.comments,a),t=this.state.comments.map((function(t){return console.log("Current comment",t),t.id===e.commentId&&(t.votes=a),t})),console.log("After updating votes",t,a),t}},{key:"updateUserVoted",value:function(e,t){this.state.usersVoted[e][this.state.username]=t}},{key:"setCommentWithVotes",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n,a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,this.state.comments.forEach((function(e){e.id===t&&(n=e)})),e.next=4,this.submitComment(n);case 4:a=e.sent,console.log("savedComment",a),a&&({id:a.id,posterName:a.posterName,posterUsername:a.posterUsername,createdAt:a.createdAt,commentText:a.commentText,votes:a.votes[a.id],usersVoted:a.usersVoted},this.state.comments&&(s=this.state.comments.findIndex((function(e){return e.id===t})),s>=0?(this.state.comments.splice(s,1),this.state.comments.push(a)):this.state.comments.push(a)),Object.keys(this.state.votes)>0||(this.state.votes={}),this.state.votes[t]=a.votes,Object.keys(this.state.usersVoted)>0||(this.state.usersVoted={}),this.state.usersVoted[t]=a.usersVoted,this.setState({commentValue:""}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setComment",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t,n,a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe++,t={id:null,postId:this.props.params.id,posterName:w.currentNameValue,posterUsername:V.getUsernameFromJWT(),commentText:this.state.commentValue,votes:null,usersVoted:null},e.next=4,this.submitComment(t);case 4:n=e.sent,a={id:n.id,posterName:n.posterName,posterUsername:n.posterUsername,createdAt:n.createdAt,commentText:n.commentText,votes:n.votes,usersVoted:n.usersVoted},this.state.comments||(this.state.comments=[]),this.state.comments.push(a),this.state.votes||(this.state.votes={}),this.state.votes[a.id]=null,s=P.currentImageValue,this.state.icons[n.posterUsername]=s,console.log("usersVoted Undefined setComment Function?",this.state.usersVoted),null!=this.state.usersVoted&&"undefined"!==typeof this.state.usersVoted||(this.state.usersVoted={},this.state.usersVoted[a.id]={},this.state.usersVoted[a.id][this.state.username]=!1),console.log("usersVoted after setComment Function?",this.state.usersVoted),this.setState({commentValue:""});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCommentLine",value:function(){var e=this,t=V.verifyLogin();t?t.then((function(t){localStorage.getItem("currentUser")&&e.setComment()})):console.log("Could not verify login credentials"),console.log("Upon comment submit",this.state.comments)}},{key:"submitComment",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n,a,s,o=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",a=JSON.stringify(t),console.log("Comment to put",a),(s=V.verifyLogin())&&s.then((function(e){return v()({method:"post",url:"/api/posts/comments/".concat(o.post_id),data:a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ve()}}).then((function(e){console.log("Response in submitComment",e),n=e.data})).catch((function(e){console.log("PutComment error",e)})),console.log("SubmitComment",n),n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIconImage",value:function(){var e=Object(f.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/getImage/".concat(t),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.data.strBase64File}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeComment",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n,a,s,o=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.comments,0,a=0,s=0,n.forEach((function(e){e.id===t&&(s=a),a++})),!(a>=0)){e.next=12;break}return 1===n.length?n=[]:n.splice(s,1),qe--,e.next=10,v.a.delete("/api/posts/comments/".concat(t),{headers:{Authorization:ve()}}).then((function(e){o.setState({comments:n})}));case 10:e.next=13;break;case 12:console.log("Could not find comment to delete");case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.title,n=e.date,a=e.body,s=e.commentValue,o=e.comments,r=e.upVoteDisabled,i=e.downVoteDisabled,c=e.icons,l=e.commentProfiles,d=(e.isExpanded,e.isLoading);if(console.log("render state",this.state),d)return Object(m.jsx)("div",{});var u="";a&&(u=Object(Ce.a)(Object(ye.convertFromRaw)(JSON.parse(a))));var h=this.currentRole,j=new Date(1e3*n),p=j.toLocaleDateString("en-US",{month:"long"})+", "+Pe()(j).format("Do, YYYY, h:mm a");return Object(m.jsx)("div",{children:Object(m.jsxs)(xe.i,{children:[Object(m.jsxs)(xe.c,{children:[Object(m.jsx)(xe.e,{children:Object(m.jsxs)(xe.g,{children:[Object(m.jsx)("h2",{children:Object(m.jsx)("em",{children:t})}),p]})}),Object(m.jsx)(xe.d,{children:Object(m.jsx)(xe.f,{children:we()(u)})})]}),V.loggedIn?Object(m.jsx)(Be,{commentValue:s,handleCommentValue:this.handleCommentValue,enterCommentLine:this.enterCommentLine,submitCommentLine:this.submitCommentLine,onClose:this.onCommentClose,isExpanded:this.isExpanded}):Object(m.jsx)("div",{}),"undefined"!==typeof o&&o&&o.length>0?Object(m.jsx)("div",{children:Object(m.jsx)(Ke,{role:h,comments:o,commentProfiles:l,incrementUpVote:this.incrementUpVote,incrementDownVote:this.incrementDownVote,upVoteDisabled:r,downVoteDisabled:i,icons:c,removeComment:this.removeComment,count:o.length,currentUsername:this.state.username,currentRole:this.currentRole})}):Object(m.jsx)("div",{}),Object(m.jsx)(xe.a,{color:"primary",tag:Y.a,to:"/posts",children:"Return to Posts"})]})})}}]),n}(a.Component),Qe=Fe(Ze),Xe=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(R.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsx)(je,{}),Object(m.jsxs)(h.d,{children:[Object(m.jsx)(h.b,{path:"/",element:Object(m.jsx)("customRoute",{path:"/",children:Object(m.jsx)(Oe,{})})}),Object(m.jsx)(h.b,{path:"/posts",element:Object(m.jsx)(Ne,{})}),Object(m.jsx)(h.b,{path:"/posts/edit/:id",element:Object(m.jsx)("requireAuth",{redirectTo:"/",children:Object(m.jsx)(ze,{})})}),Object(m.jsx)(h.b,{path:"/posts/view/:id",element:Object(m.jsx)(Qe,{})}),Object(m.jsx)(h.b,{path:"/registration",element:Object(m.jsx)("requireAuth",{redirectTo:"/",children:Object(m.jsx)(Ae,{})})}),Object(m.jsx)(h.b,{path:"/profile",element:Object(m.jsx)("requireAuth",{redirectTo:"/",children:Object(m.jsx)(Re,{})})})]})]})})}}]),n}(s.a.PureComponent);var $e=function(e){var t=JSON.parse(localStorage.getItem("tokens")),n=Object(a.useState)(t||null),s=Object(d.a)(n,2);return s[0],s[1],Object(m.jsx)(Xe,{})},et=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,644)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),o(e),r(e)}))};n(621);r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(p,{history:c,children:Object(m.jsx)($e,{})})}),document.getElementById("root")),et()}},[[622,1,2]]]);
//# sourceMappingURL=main.dbabb08d.chunk.js.map